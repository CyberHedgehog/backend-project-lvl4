extends /layouts/inner.pug
include /mixins/modal.pug

block title
  title Users

block nav-links
  li.nav-item
    a(class="nav-link" href="/tasks/list") Tasks
  li.nav-item
    a(class="nav-link active" href="/users/list") Users

block main
  .container
    .row.justify-content-center
      .p-3
        h1 Users list
    .row.justify-content-center
      - const [msg] = flash('success')
      if msg
        +alert('success', msg)
      .col-10.shadow-sm.p-3.mb-5.bg-white.rounded
        .table-responsive-sm
          table.table
            thead
              tr
                th(scope="col") Firstname
                th(scope="col") LastName
                th(scope="col") Email
                th(scope="col" class="col-1")
            tbody
              each user in usersList
                tr
                  td= user.firstName
                  td= user.lastName
                  td= user.email
                  td(class="col-1")
                    button(class="btn btn-danger" data-toggle="modal" data-target=`#delete-${user.id}` value="Delete profile") Delete
                    - const link = `/users/${user.id}`
                    .modal.fade(id=`delete-${user.id}` tabindex="-1" role="dialog" aria-labelledby="deleteModal" aria-hidden="true")
                      .modal-dialog(role="document")
                        .modal-content
                          .modal-body
                            h5 User will be deleted!
                          .modal-footer
                            button(type="button" class="btn btn-secondary" data-dismiss="modal") Close
                            a(href=`${link}` data-method="delete" class="btn btn-danger") Delete